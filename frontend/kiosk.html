<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" type="text/css">
    <link rel="icon" href="assets/icon.png" type="image/png">
    <title>Kiosk</title>
    <style>
        #screen {
            background-image: url("./assets/background/background2.png");
            background-size: auto;
        }
        #backToScreen {
            animation: rotate 1s linear infinite; /* Ustawienie animacji o nazwie 'rotate' */
            animation-direction: alternate;
        }



        @keyframes rotate {
            0% {
                border: 4px solid #422136;
                border-radius: 90%;
            }
            100% {
                transform: scale(1.3);
                border: 4px solid #742f29;
                border-radius: 40%;
            }
        }
    </style>
</head>
<body>
    <div class="body">
        <div id="money">
            <div id="moneyValue">
                <div id="mon"></div>
                <div id="val"></div>
            </div>
        </div>
        <div id="ramka">
        <div id="screen">
            <div class="Stats" id="babolotStats"></div>
            <div class="Stats" id="holeraceStats"></div>
            <div class="Stats" id="quizyStats"></div>
            <div class="Stats" id="XP"></div>
            <div class="Stats" id="lvl"></div>
        </div>
        <div id="AllStatsInfo">
            <div id="statsDiv">
                <table id="statsContainer"></table>
                <div id="backToScreen"></div>
            </div>
          </div>
        </div>
        <div id="settings">
            <div class="settingsButton" id="back"></div>
            <div class="settingsButton" id="zoomIn"></div>
            <div class="settingsButton" id="zoomOut"></div>
            <div class="settingsButton" id="music"></div>
            <div class="settingsButton" id="volume"></div>
        </div>
    </div>

    <script>
        var backDiv = document.getElementById("back");
        backDiv.onclick = function() {
            window.location.href = '/city';
        };
        var zoomInButton = document.getElementById("zoomIn");
        zoomInButton.onclick = function() {
            document.body.style.zoom = parseFloat(window.getComputedStyle(document.body).zoom) + 0.1;
        };
        var zoomOutButton = document.getElementById("zoomOut");
        zoomOutButton.onclick = function() {
            document.body.style.zoom = parseFloat(window.getComputedStyle(document.body).zoom) - 0.1;
        };

        var AllStatsInfo = document.getElementById("AllStatsInfo");

        var babolotStats = document.getElementById("babolotStats");
        babolotStats.onclick = function() {
          AllStatsInfo.style.display = "flex";
          document.getElementById("screen").style.display = "none";
          fetch('/stats-babolot')
            .then(response => response.json())
            .then(data => {
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = ""; // Czyszczenie kontenera na statystyki przed wyświetleniem nowych danych
            
              if (data.length > 0) {
                var tableHTML = "<tr><th>Miejsce</th><th>Login użytkownika</th><th>Nazwa statystyki</th><th>Punkty</th></tr>";
                data.forEach(stat => {
                  tableHTML += `<tr><td>${stat.miejsce}</td><td>${stat.loginUzytkownika}</td><td>${stat.statName}</td><td>${stat.iloscPunktow}</td></tr>`;
                });
                statsContainer.innerHTML = tableHTML;
              } else {
                var noStatsMsg = document.createElement("p");
                noStatsMsg.textContent = "Nie znaleziono statystyk.";
                statsContainer.appendChild(noStatsMsg);
              }
            })
            .catch(error => {
              console.error(error);
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = "Wystąpił błąd podczas pobierania statystyk.";
            });
        };
        var babolotStats = document.getElementById("babolotStats");
        babolotStats.onclick = function() {
          AllStatsInfo.style.display = "flex";
          document.getElementById("screen").style.display = "none";
          fetch('/stats-babolot')
            .then(response => response.json())
            .then(data => {
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = ""; // Czyszczenie kontenera na statystyki przed wyświetleniem nowych danych
            
              if (data.length > 0) {
                var tableHTML = "<tr><th>Miejsce</th><th>Login użytkownika</th><th>Nazwa statystyki</th><th>Punkty</th></tr>";
                data.forEach(stat => {
                  tableHTML += `<tr><td>${stat.miejsce}</td><td>${stat.loginUzytkownika}</td><td>${stat.statName}</td><td>${stat.iloscPunktow}</td></tr>`;
                });
                statsContainer.innerHTML = tableHTML;
              } else {
                var noStatsMsg = document.createElement("p");
                noStatsMsg.textContent = "Nie znaleziono statystyk.";
                statsContainer.appendChild(noStatsMsg);
              }
            })
            .catch(error => {
              console.error(error);
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = "Wystąpił błąd podczas pobierania statystyk.";
            });
        };
        var babolotStats = document.getElementById("holeraceStats");
        babolotStats.onclick = function() {
          AllStatsInfo.style.display = "flex";
          document.getElementById("screen").style.display = "none";
          fetch('/stats-holerace')
            .then(response => response.json())
            .then(data => {
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = ""; // Czyszczenie kontenera na statystyki przed wyświetleniem nowych danych
            
              if (data.length > 0) {
                var tableHTML = "<tr><th>Miejsce</th><th>Login użytkownika</th><th>Nazwa statystyki</th><th>Punkty</th></tr>";
                data.forEach(stat => {
                  tableHTML += `<tr><td>${stat.miejsce}</td><td>${stat.loginUzytkownika}</td><td>${stat.statName}</td><td>${stat.iloscPunktow}</td></tr>`;
                });
                statsContainer.innerHTML = tableHTML;
              } else {
                var noStatsMsg = document.createElement("p");
                noStatsMsg.textContent = "Nie znaleziono statystyk.";
                statsContainer.appendChild(noStatsMsg);
              }
            })
            .catch(error => {
              console.error(error);
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = "Wystąpił błąd podczas pobierania statystyk.";
            });
        };
        var babolotStats = document.getElementById("quizyStats");
        babolotStats.onclick = function() {
          AllStatsInfo.style.display = "flex";
          document.getElementById("screen").style.display = "none";
          fetch('/stats-quizy')
            .then(response => response.json())
            .then(data => {
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = ""; // Czyszczenie kontenera na statystyki przed wyświetleniem nowych danych
            
              if (data.length > 0) {
                var tableHTML = "<tr><th>Miejsce</th><th>Login użytkownika</th><th>Nazwa statystyki</th><th>Punkty</th></tr>";
                data.forEach(stat => {
                  tableHTML += `<tr><td>${stat.miejsce}</td><td>${stat.loginUzytkownika}</td><td>${stat.statName}</td><td>${stat.iloscPunktow}</td></tr>`;
                });
                statsContainer.innerHTML = tableHTML;
              } else {
                var noStatsMsg = document.createElement("p");
                noStatsMsg.textContent = "Nie znaleziono statystyk.";
                statsContainer.appendChild(noStatsMsg);
              }
            })
            .catch(error => {
              console.error(error);
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = "Wystąpił błąd podczas pobierania statystyk.";
            });
        };
        var babolotStats = document.getElementById("XP");
        babolotStats.onclick = function() {
          AllStatsInfo.style.display = "flex";
          document.getElementById("screen").style.display = "none";
          fetch('/stats-xp')
            .then(response => response.json())
            .then(data => {
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = ""; // Czyszczenie kontenera na statystyki przed wyświetleniem nowych danych
            
              if (data.length > 0) {
                var tableHTML = "<tr><th>Miejsce</th><th>Login użytkownika</th><th>Nazwa statystyki</th><th>Punkty</th></tr>";
                data.forEach(stat => {
                  tableHTML += `<tr><td>${stat.miejsce}</td><td>${stat.loginUzytkownika}</td><td>${stat.statName}</td><td>${stat.iloscPunktow}</td></tr>`;
                });
                statsContainer.innerHTML = tableHTML;
              } else {
                var noStatsMsg = document.createElement("p");
                noStatsMsg.textContent = "Nie znaleziono statystyk.";
                statsContainer.appendChild(noStatsMsg);
              }
            })
            .catch(error => {
              console.error(error);
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = "Wystąpił błąd podczas pobierania statystyk.";
            });
        };
          fetch('/stats-lvl')
            .then(response => response.json())
            .then(data => {
              var statsContainer = document.getElementById("lvl");
              statsContainer.innerHTML = ""; 
              statsContainer.innerHTML = data.userLevel;
            
            })
            .catch(error => {
              console.error(error);
              var statsContainer = document.getElementById("statsContainer");
              statsContainer.innerHTML = "Wystąpił błąd podczas pobierania statystyk.";
            });
        
        

        var backToScreen = document.getElementById("backToScreen");
        backToScreen.onclick = function(){
            AllStatsInfo.style.display = "none";
            document.getElementById("screen").style.display = "flex";

        }

    </script>
</body>
</html>